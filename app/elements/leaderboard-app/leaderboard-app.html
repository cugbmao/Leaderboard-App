<polymer-element fit layout vertical name="leaderboard-app" attributes="user userDetails">

    <template>

        <link rel="stylesheet" href="leaderboard-app.css">

        <core-style ref="card--primary"></core-style>

        <core-animated-pages selected="{{selected}}" transitions="cross-fade slide-down slide-up-offscreen" flex auto>

          <leaderboard-authentication id="profile" name="profile" userDetails="{{userDetails}}" user="{{user}}"
                                      statusKnown="{{statusKnown}}" wide="{{wide}}" layout center vertical>
          </leaderboard-authentication>

          <leaderboard-menu id="menu" name="menu" userDetails="{{userDetails}}" wide="{{wide}}"
                            section="{{section}}" on-core-activate="{{sectionSelect}}">
          </leaderboard-menu>

          <leaderboard-scoreboard name="scoreboard" userDetails="{{userDetails}}" wide="{{wide}}"
                                  disabled="{{disableScoreboard}}">
          </leaderboard-scoreboard>

        </core-animated-pages>

        <core-media-query query="min-width: {{responsiveWidth}}" queryMatches="{{wide}}"></core-media-query>

    </template>

    <script>
        (function () {
            'use strict';

            Polymer({

              responsiveWidth: '900px',

              observe: {
                'userDetails': 'enterMenu'
              },

              enterMenu: function() {
                if (this.userDetails && this.statusKnown) {
                  this.selected = 1;
                } else {
                  this.selected = 0;
                }
              },

              sectionSelect: function() {
                var sectionName;

                if (this.section) {
                  sectionName = this.section.name;
                  if (sectionName === 'leaderboard') {
                    this.selected = 2;
                  } else if (sectionName === 'profile') {
                    this.selected = 0;
                  }
                }
              }
            });

        })();
    </script>

</polymer-element>
